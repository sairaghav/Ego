import listener,speaker,google_search,threading,sys,time,browser


class RunCheck(threading.Thread):
    def __init__(self,reading,link):
        threading.Thread.__init__(self)
        self.reading = reading
        self.link = link

    def run(self):
        global reading
        reading = self.reading

        while reading == 1:
            choice = listener.listen()
            if 'stop' in choice:
                reading = 0
                break
            elif 'select' in choice and not '' in link:
                reading = 0
                browser.browse(self.link)
                break
            

def read_book(filename):
    global reading
    reading = 1
    with open(filename,'r') as fp:
        if reading == 1:
            for line in fp.readlines():
                speaker.speak(line)
                RunCheck(reading,'').start()

def read_news():
    global reading
    reading = 1
    speaker.speak('Is there any specific news that you want to hear about? Say BREAKING NEWS if you want to hear the current top news.')
    
    data = listener.listen()

    if 'breaking news' in data:
        data = 'news'
        
    if data is '':
        pass
    
    else:   
        for link,headlines in google_search.search_news(data).iteritems():
            if reading == 1:
                speaker.speak(headlines)
                RunCheck(reading,link).start()

            
            
read_book('C:\Users\Sai Raghav\Documents\Github Repos\Ego\ego_v2\\test.txt')
